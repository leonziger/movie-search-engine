(this["webpackJsonpreact-movies-search-engine"]=this["webpackJsonpreact-movies-search-engine"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(77),a(35)),l=a(23),m=(a(49),a(30)),u=a(13),s=a(38),p=a(58),g=a.n(p).a.create({baseURL:"https://api.themoviedb.org/3"});g.interceptors.request.use((function(e){return e.params=e.params||{},e.params.api_key="ee0f05a0f4bb56e4353f24db8f4f30ef",e}));var d="https://image.tmdb.org/t/p/w300_and_h450_bestv2",b=function(e){e.poster_path=d+e.poster_path,e.backdrop_path=d+e.backdrop_path},v=function(e){return g.get("/search/movie",e).then((function(e){var t=e.data;return t.results.forEach(b),t})).catch((function(e){throw e.data}))},h=function(e){return g.get("/genre/movie/list?",e).then((function(e){var t=e.data;return t.genres.reduce((function(e,t){return Object(m.a)({},e,Object(s.a)({},t.id,t.name))}),{})})).catch((function(e){throw e.data}))},f={query:"",page:1,language:"ru-RU",include_adult:!1},E=r.a.createContext({}),x=function(e){var t=e.children,a=Object(n.useState)(f),o=Object(u.a)(a,2),c=o[0],i=o[1],l=Object(n.useState)(0),s=Object(u.a)(l,2),p=s[0],g=s[1],d=Object(n.useState)(0),b=Object(u.a)(d,2),x=b[0],j=b[1],O=Object(n.useState)([]),y=Object(u.a)(O,2),_=y[0],w=y[1],k=Object(n.useState)([]),S=Object(u.a)(k,2),N=S[0],P=S[1],C=Object(n.useState)({}),q=Object(u.a)(C,2),M=q[0],R=q[1],B=Object(n.useState)(!1),W=Object(u.a)(B,2),z=W[0],H=(W[1],Object(n.useState)(!1)),I=Object(u.a)(H,2),U=I[0],D=I[1],G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.query&&e.query.length<=1)return w([]),g(0),void j(0);v({params:Object(m.a)({},c,{},e)}).then((function(t){g(t.total_pages),j(t.total_results),w(t.results),i((function(a){return Object(m.a)({},a,{},e,{page:t.page})}))})).catch((function(e){return D(!0)}))},J={filter:c,totalPages:p,totalResults:x,movies:_,genres:N,movie:M,firstSearch:z,error:U,searchMovies:G,changePage:function(e,t){G({page:t})},setMovie:R};return Object(n.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h({params:Object(m.a)({language:"ru-RU"},e)}).then(P).catch((function(e){return D(!0)}))}()}),[]),r.a.createElement(E.Provider,{value:J},t)},j=a(135),O=a(103),y=a(141),_=a(104),w=a(142),k=a(138),S=a(146),N=a(140),P=Object(j.a)({form:{display:"flex",width:"100%",margin:"10px 0 15px"},input:{backgroundColor:"white"},button:{marginLeft:"10px",height:"99%"}}),C=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useContext)(E).searchMovies,i=P();return r.a.createElement(k.a,{container:!0,spacing:1},r.a.createElement("form",{className:i.form,onSubmit:function(e){e.preventDefault(),c({query:a})}},r.a.createElement(k.a,{item:!0,xs:11},r.a.createElement(S.a,{className:i.input,fullWidth:!0,autoComplete:"off",label:"\u041f\u043e\u0438\u0441\u043a \u0444\u0438\u043b\u044c\u043c\u0430",name:"film",color:"primary",id:"outlined-basic",variant:"outlined",size:"medium",value:a,onChange:function(e){o(e.target.value)}})),r.a.createElement(k.a,{item:!0,lg:1},r.a.createElement(N.a,{className:i.button,variant:"contained",color:"primary",type:"submit"},"\u041f\u043e\u0438\u0441\u043a"))))},q=Object(j.a)({headline:{paddingTop:"10px"}}),M=function(){var e=q();return r.a.createElement(O.a,{elevation:1},r.a.createElement(y.a,null,r.a.createElement(_.a,{variant:"h6",component:"h1",color:"textPrimary",align:"center",className:e.headline},r.a.createElement(w.a,{color:"primary",underline:"none",href:"/"},"Movie Search Engine")),r.a.createElement(C,null)))},R=a(147),B=(a(98),Object(j.a)({pagination:{paddingBottom:"10px"}})),W=function(){var e=Object(n.useContext)(E),t=e.filter,a=e.totalPages,o=e.totalResults,c=e.changePage,i=B();return r.a.createElement(y.a,null,r.a.createElement(_.a,{variant:"body2",color:"textPrimary",align:"center"},"\u041d\u0430\u0439\u0434\u0435\u043d\u043e ",o," \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"),r.a.createElement(R.a,{className:i.pagination,page:t.page,count:a,variant:"outlined",shape:"rounded",onChange:c}))},z=a(143),H=a(144),I=a(145),U=a(43),D=a.n(U),G=Object(j.a)({root:{height:"100%"},media:{backgroundSize:"contain",height:"320px",maxWidth:"250px",margin:"20px auto 0"},content:{flexGrow:1}}),J=function(e){var t=e.movie,a=Object(n.useState)(!1),o=Object(u.a)(a,2),c=o[0],l=o[1],m=Object(n.useContext)(E).genres,s=G();return r.a.createElement(i.b,{to:"/movie/"+t.id},r.a.createElement(z.a,{className:s.root,variant:"outlined",square:!0},r.a.createElement(H.a,{className:s.media,src:c?D.a:t.backdrop_path||t.poster_path,component:"img",onError:function(){l(!0)}}),r.a.createElement(I.a,{className:s.content},r.a.createElement(_.a,{gutterBottom:!0,variant:"h5",color:"textPrimary",component:"h2"},t.title," ",t.release_date&&"(".concat(new Date(t.release_date).getFullYear(),")")),t.genre_ids.length>0&&r.a.createElement(_.a,{variant:"subtitle2",color:"textSecondary",component:"p"},r.a.createElement("b",null,"\u0416\u0430\u043d\u0440: "),t.genre_ids.map((function(e){return m[e]})).join(", ")),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},t.overview.length>0?function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.length>t?e.substring(0,t)+a:e}(t.overview,100):"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043e\u0431\u0437\u043e\u0440 \u0444\u0438\u043b\u044c\u043c\u0430 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442."))))},L=a(64),F=a.n(L),T=Object(j.a)({main:{backgroundImage:"url(".concat(F.a,")"),backgroundPosition:"center",minHeight:"500px"},clean:{background:"none",minHeight:"500px",margin:"20px"}}),Y=function(){var e=Object(n.useContext)(E),t=e.movies,a=e.totalResults,o=T();return r.a.createElement("div",{className:o.clean},r.a.createElement(y.a,null,a>0?r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(k.a,{container:!0,spacing:4},t.map((function(e){return r.a.createElement(k.a,{item:!0,lg:3,md:4,sm:6,key:e.id},r.a.createElement(J,{movie:e}))})))):r.a.createElement("div",null,r.a.createElement(_.a,{align:"center",color:"error",variant:"subtitle1",justify:"center",component:"p"},"\u041f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"))))},$=function(){var e=Object(n.useContext)(E),t=e.movies,a=e.error;return r.a.createElement("div",null,t?r.a.createElement(Y,null):a&&r.a.createElement(_.a,{align:"center",color:"error",variant:"subtitle1",justify:"center",component:"p"},"Movies can't be loaded on this page"))},A=Object(j.a)({footer:{backgroundColor:"black",minHeight:"30px",color:"white"},link:{color:"white",display:"flex",alignItems:"center",justifyContent:"center",padding:"10px"}});function K(){var e=A();return r.a.createElement(O.a,{variant:"outlined",square:!0,className:e.footer},r.a.createElement(y.a,null,r.a.createElement(_.a,{variant:"h6",component:"p",align:"center"},r.a.createElement(w.a,{underline:"none",href:"/",className:e.link},"Movie Search Engine. Copyright 2020"))))}var Q=Object(j.a)({root:{display:"flex",margin:"10px 0 0"},media:{backgroundSize:"contain",height:"300px",maxWidth:"200px",margin:"20px auto"},content:{flexGrow:1,width:"100%"},overview:{marginBottom:"20px"}}),V=function(){var e=Object(l.e)().id,t=Object(n.useContext)(E),a=t.movies,o=t.genres,c=Object(n.useState)(!1),i=Object(u.a)(c,2),m=i[0],s=i[1],p=a.filter((function(t){return Number(t.id)===Number(e)}))[0],g=Q();return r.a.createElement(x,null,r.a.createElement(y.a,null,r.a.createElement(z.a,{className:g.root},r.a.createElement(H.a,{className:g.media,src:m?D.a:p.backdrop_path||p.poster_path,component:"img",onError:function(){s(!0)}}),r.a.createElement(I.a,null,r.a.createElement(_.a,{variant:"h4",color:"textPrimary",component:"h3",className:g.overview},p.title),r.a.createElement(_.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u044c: "),p.popularity," (",p.vote_count," / ",p.vote_average,")"),r.a.createElement(_.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u0414\u0430\u0442\u0430 \u0440\u0435\u043b\u0438\u0437\u0430: "),p.release_date),r.a.createElement(_.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438e: "),p.original_title),r.a.createElement(_.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u042f\u0437\u044b\u043a \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u0430: "),p.original_language?"\u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439":p.original_language),p.genre_ids.length>0&&r.a.createElement(_.a,{variant:"body2",color:"textPrimary",component:"p",className:g.overview},r.a.createElement("b",null,"\u0416\u0430\u043d\u0440: "),p.genre_ids.map((function(e){return o[e]})).join(", ")),r.a.createElement(_.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u041e\u0431\u0437\u043e\u0440: "),p.overview.length>0?p.overview:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043e\u0431\u0437\u043e\u0440 \u0444\u0438\u043b\u044c\u043c\u0430 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442.")))))},X=(a(101),function(){return r.a.createElement(x,null,r.a.createElement(M,null),r.a.createElement(i.a,null,r.a.createElement(l.a,{path:"/",exact:!0,component:$}),r.a.createElement(l.a,{path:"/movie/:id",component:V})),r.a.createElement(K,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},43:function(e,t,a){e.exports=a.p+"static/media/camera.c73a1804.png"},64:function(e,t,a){e.exports=a.p+"static/media/mainbg.843e1bb9.jpg"},72:function(e,t,a){e.exports=a(102)},77:function(e,t,a){},98:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.5df4fb9c.chunk.js.map