(this["webpackJsonpreact-movies-search-engine"]=this["webpackJsonpreact-movies-search-engine"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(77),a(36)),l=a(23),m=(a(49),a(31)),u=a(12),s=a(39),p=a(58),g=a.n(p).a.create({baseURL:"https://api.themoviedb.org/3"});g.interceptors.request.use((function(e){return e.params=e.params||{},e.params.api_key="ee0f05a0f4bb56e4353f24db8f4f30ef",e.params.language="ru-RU",e}));var b="https://image.tmdb.org/t/p/w300_and_h450_bestv2",d=function(e){e.poster_path=e.poster_path&&b+e.poster_path,e.backdrop_path=e.backdrop_path&&b+e.backdrop_path},h=function(e){return g.get("/search/movie",e).then((function(e){var t=e.data;return t.results.forEach(d),t})).catch((function(e){throw e.data}))},v=function(e){return g.get("/genre/movie/list",e).then((function(e){var t=e.data;return t.genres.reduce((function(e,t){return Object(m.a)({},e,Object(s.a)({},t.id,t.name))}),{})})).catch((function(e){throw e.data}))},f={query:"",page:1,include_adult:!1},E=r.a.createContext({}),x=function(e){var t=e.children,a=Object(n.useState)(f),o=Object(u.a)(a,2),c=o[0],i=o[1],l=Object(n.useState)(0),s=Object(u.a)(l,2),p=s[0],g=s[1],b=Object(n.useState)(0),d=Object(u.a)(b,2),x=d[0],_=d[1],y=Object(n.useState)([]),j=Object(u.a)(y,2),O=j[0],w=j[1],k=Object(n.useState)([]),S=Object(u.a)(k,2),P=S[0],N=S[1],C=Object(n.useState)(!1),q=Object(u.a)(C,2),M=q[0],L=q[1],R=Object(n.useState)(!1),W=Object(u.a)(R,2),z=W[0],B=W[1],$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.query&&e.query.length<=1)return w([]),g(0),void _(0);var t=(B(!0),function(){h({params:Object(m.a)({},c,{},e)}).then((function(t){B(!1),g(t.total_pages),_(t.total_results),w(t.results),i((function(a){return Object(m.a)({},a,{},e,{page:t.page})}))})).catch((function(e){return L(!0)}))});t()},D={filter:c,totalPages:p,totalResults:x,movies:O,genres:P,error:M,isLoading:z,searchMovies:$,changePage:function(e,t){$({page:t})},setLoading:B};return Object(n.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v({params:Object(m.a)({},e)}).then(N).catch((function(e){return L(!0)}))}()}),[]),r.a.createElement(E.Provider,{value:D},t)},_=a(136),y=a(103),j=a(142),O=a(104),w=a(143),k=a(139),S=a(148),P=a(141),N=Object(_.a)({form:{display:"flex",width:"100%",margin:"10px 0 15px"},input:{backgroundColor:"white"},button:{marginLeft:"10px",height:"99%"}}),C=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useContext)(E).searchMovies,i=N();return r.a.createElement(k.a,{container:!0,spacing:1},r.a.createElement("form",{className:i.form,onSubmit:function(e){e.preventDefault(),c({query:a})}},r.a.createElement(k.a,{item:!0,xs:11},r.a.createElement(S.a,{className:i.input,fullWidth:!0,autoComplete:"off",label:"\u041f\u043e\u0438\u0441\u043a \u0444\u0438\u043b\u044c\u043c\u0430",name:"film",color:"primary",id:"outlined-basic",variant:"outlined",size:"medium",value:a,onChange:function(e){o(e.target.value)}})),r.a.createElement(k.a,{item:!0,lg:1},r.a.createElement(P.a,{className:i.button,variant:"contained",color:"primary",type:"submit"},"\u041f\u043e\u0438\u0441\u043a"))))},q=Object(_.a)({headline:{paddingTop:"10px"}}),M=function(){var e=q();return r.a.createElement(y.a,{elevation:1},r.a.createElement(j.a,null,r.a.createElement(O.a,{variant:"h6",component:"h1",color:"textPrimary",align:"center",className:e.headline},r.a.createElement(w.a,{color:"primary",underline:"none",href:"/"},"Movie Search Engine")),r.a.createElement(C,null)))},L=a(149),R=(a(98),Object(_.a)({pagination:{paddingBottom:"10px"}})),W=function(){var e=Object(n.useContext)(E),t=e.filter,a=e.totalPages,o=e.totalResults,c=e.changePage,i=R();return r.a.createElement(j.a,null,r.a.createElement(O.a,{variant:"body2",color:"textPrimary",align:"center"},"\u041d\u0430\u0439\u0434\u0435\u043d\u043e ",o," \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"),r.a.createElement(L.a,{className:i.pagination,page:t.page,count:a,variant:"outlined",shape:"rounded",onChange:c}))},z=a(144),B=a(145),$=a(146),D=a(24),H=a.n(D),I=Object(_.a)({link:{textDecoration:"none"},root:{height:"100%"},media:{backgroundSize:"contain",height:"320px",maxWidth:"250px",margin:"20px auto 0"},content:{flexGrow:1}}),G=function(e){var t=e.movie,a=Object(n.useState)(!1),o=Object(u.a)(a,2),c=o[0],l=o[1],m=Object(n.useContext)(E).genres,s=I();return r.a.createElement(i.b,{to:"/movie/"+t.id,className:s.link},r.a.createElement(z.a,{className:s.root,variant:"outlined",square:!0},r.a.createElement(B.a,{className:s.media,src:c?H.a:t.backdrop_path||t.poster_path||H.a,component:"img",onError:function(){l(!0)}}),r.a.createElement($.a,{className:s.content},r.a.createElement(O.a,{gutterBottom:!0,variant:"h5",color:"textPrimary",component:"h2"},t.title," ",t.release_date&&"(".concat(new Date(t.release_date).getFullYear(),")")),t.genre_ids.length>0&&r.a.createElement(O.a,{variant:"subtitle2",color:"textSecondary",component:"p"},r.a.createElement("b",null,"\u0416\u0430\u043d\u0440: "),t.genre_ids.map((function(e){return m[e]})).join(", ")),r.a.createElement(O.a,{variant:"body2",color:"textSecondary",component:"p"},t.overview.length>0?function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.length>t?e.substring(0,t)+a:e}(t.overview,100):"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043e\u0431\u0437\u043e\u0440 \u0444\u0438\u043b\u044c\u043c\u0430 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442."))))},J=a(147),T={container:{width:"100%"},spinner:{margin:"24px auto",display:"block"}},U=function(){return r.a.createElement("div",{style:T.container},r.a.createElement(J.a,{style:T.spinner,size:68,thikness:5}))},F=a(64),Y=a.n(F),A=Object(_.a)({main:{backgroundImage:"url(".concat(Y.a,")"),backgroundPosition:"center",minHeight:"500px"},clean:{background:"none",minHeight:"500px",margin:"20px"}}),K=function(){var e=Object(n.useContext)(E),t=e.movies,a=(e.totalResults,e.isLoading),o=A();return r.a.createElement("div",{className:o.clean},r.a.createElement(j.a,null,a?r.a.createElement(U,null):r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(k.a,{container:!0,spacing:4},t.map((function(e){return r.a.createElement(k.a,{item:!0,lg:3,md:4,sm:6,key:e.id},r.a.createElement(G,{movie:e}))}))))))},Q=function(){var e=Object(n.useContext)(E),t=e.movies,a=e.error;return r.a.createElement("div",null,t?r.a.createElement(K,null):a&&r.a.createElement(O.a,{align:"center",color:"error",variant:"subtitle1",justify:"center",component:"p"},"Movies can't be loaded on this page"))},V=Object(_.a)({footer:{backgroundColor:"black",minHeight:"30px",color:"white"},link:{color:"white",display:"flex",alignItems:"center",justifyContent:"center",padding:"10px"}});function X(){var e=V();return r.a.createElement(y.a,{variant:"outlined",square:!0,className:e.footer},r.a.createElement(j.a,null,r.a.createElement(O.a,{variant:"h6",component:"p",align:"center"},r.a.createElement(w.a,{underline:"none",href:"/",className:e.link},"Movie Search Engine. Copyright 2020"))))}var Z=Object(_.a)({root:{display:"flex",margin:"10px 0 0",boxShadow:"none"},media:{backgroundSize:"contain",height:"300px",maxWidth:"200px",margin:"20px auto"},content:{flexGrow:1,width:"100%"},overview:{marginTop:"20px"}}),ee=function(){var e,t=Object(l.e)().id,a=Object(n.useState)(!1),o=Object(u.a)(a,2),c=o[0],i=o[1],m=Object(n.useState)({}),s=Object(u.a)(m,2),p=s[0],b=s[1],h=Object(n.useState)(!1),v=Object(u.a)(h,2),f=(v[0],v[1]),E=Z(),x=function(){i(!0)},_=function(e){(function(e,t){return g.get("/movie/"+e,t).then((function(e){return d(e.data),e.data.belongs_to_collection&&d(e.data.belongs_to_collection),e})).catch((function(e){throw e.data}))})(e).then((function(e){return b(e.data)})).catch((function(e){return f(!0)}))};return Object(n.useEffect)((function(){_(t)}),[t]),r.a.createElement(j.a,null,r.a.createElement(z.a,{className:E.root},r.a.createElement(B.a,{className:E.media,src:c?H.a:p.backdrop_path||p.poster_path||H.a,component:"img",onError:x}),r.a.createElement($.a,{className:E.content},r.a.createElement(O.a,{variant:"h4",color:"textPrimary",component:"h3",className:E.overview},p.title),r.a.createElement(O.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u044c: "),p.popularity," (",p.vote_count," / ",p.vote_average,")"),!!p.budget&&r.a.createElement(O.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u0411\u044e\u0434\u0436\u0435\u0442: ")," $",(e=p.budget,String(e).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "))),p.release_date&&r.a.createElement(O.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u0414\u0430\u0442\u0430 \u0440\u0435\u043b\u0438\u0437\u0430: "),function(e){var t=e.split("-"),a=[{number:"01",name:"\u044f\u043d\u0432\u0430\u0440\u044f"},{number:"02",name:"\u0444\u0435\u0432\u0440\u0430\u043b\u044f"},{number:"03",name:"\u043c\u0430\u0440\u0442\u0430"},{number:"04",name:"\u0430\u043f\u0440\u0435\u043b\u044f"},{number:"05",name:"\u043c\u0430\u044f"},{number:"06",name:"\u0438\u044e\u043d\u044f"},{number:"07",name:"\u0438\u044e\u043b\u044f"},{number:"08",name:"\u0430\u0432\u0433\u0443\u0441\u0442\u0430"},{number:"09",name:"\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f"},{number:"10",name:"\u043e\u043a\u0442\u044f\u0431\u0440\u044f"},{number:"11",name:"\u043d\u043e\u044f\u0431\u0440\u044f"},{number:"12",name:"\u0434\u0435\u043a\u0430\u0431\u0440\u044f"}].filter((function(e){return e.number===t[1]}));return t[2]+" "+a[0].name+" "+t[0]+" \u0433."}(p.release_date)),r.a.createElement(O.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438e: "),p.original_title," ",p.homepage&&r.a.createElement("a",{href:p.homepage,target:"_blank",rel:"noopener noreferrer"},"\u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442")),r.a.createElement(O.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u042f\u0437\u044b\u043a \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u0430: "),"en"===p.original_language?"\u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439":p.original_language),p.belongs_to_collection&&p.belongs_to_collection.name&&r.a.createElement(O.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f: "),p.belongs_to_collection.name),p.genres&&p.genres.length>0&&r.a.createElement(O.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u0416\u0430\u043d\u0440: "),p.genres.map((function(e){return e.name})).join(", ")),p.overview&&p.overview.length>0&&r.a.createElement(O.a,{variant:"body2",color:"textPrimary",component:"p",className:E.overview},r.a.createElement("b",null,"\u041e\u0431\u0437\u043e\u0440: "),p.overview),p.production_companies&&p.production_companies.length>0&&r.a.createElement(O.a,{variant:"body2",color:"textPrimary",component:"p"},r.a.createElement("b",null,"\u041a\u0438\u043d\u043e\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438: "),function(e){var t="";return e.production_companies.map((function(e){return t=e.origin_country.length>0?t+e.name+"(".concat(e.origin_country,"), "):t+e.name+", "})),t.slice(0,-2)}(p))),p.belongs_to_collection&&r.a.createElement(B.a,{className:E.media,src:c?H.a:p.belongs_to_collection.backdrop_path||p.belongs_to_collection.poster_path||H.a,component:"img",onError:x})))},te=(a(101),function(){return r.a.createElement(x,null,r.a.createElement(M,null),r.a.createElement(i.a,null,r.a.createElement(l.a,{path:"/",exact:!0,component:Q}),r.a.createElement(l.a,{path:"/movie-search-engine",component:Q}),r.a.createElement(l.a,{path:"/movie/:id",component:ee})),r.a.createElement(X,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},24:function(e,t,a){e.exports=a.p+"static/media/camera.c73a1804.png"},64:function(e,t,a){e.exports=a.p+"static/media/mainbg.843e1bb9.jpg"},72:function(e,t,a){e.exports=a(102)},77:function(e,t,a){},98:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.af0d2b4d.chunk.js.map