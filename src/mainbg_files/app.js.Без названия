window.moviemania={},moviemania.setWallpaperImages=function(){var e;return e=window.devicePixelRatio||1,$(".image-should-set:not(.image-set)").each(function(){var n,a,t;return $(this).addClass("image-set"),n=$(this).width()*e,t=$(this).data("images-urls"),a=(()=>{var e,o,i;for(o=e=0,i=t.length;e<i;o=++e)if(a=t[o],n>a.w)return 0===o?a.url:t[o-1].url;return t[t.length-1].url})(),"img"===$(this).prop("tagName").toLowerCase()?$(this).attr("src",a):$(this).css("background-image",`url(${a})`)})},moviemania.currentWallpapersXhr=null,moviemania.loadMoreWallpapersIfNeeded=function(){var e,n;if($(".wallpapers-container.infinite-loading").length&&!moviemania.currentWallpapersXhr&&!$(".wallpapers-container.infinite-loading .wallpaper:last").hasClass("end"))return $(".wallpapers-container.infinite-loading .wallpaper").length<30?($(".wallpapers-container.infinite-loading .wallpaper:last").addClass("end"),void $(".wallpapers-loader").hide()):(n=$(window).height(),$(window).scrollTop()+n>$(document).height()-n?(moviemania.isLoadingMore=!0,(e=new Url(window.location.href)).query.offset=$(".wallpapers-container.infinite-loading .wallpaper").length,moviemania.currentWallpapersXhr=$.ajax({url:e.toString(),dataType:"html"}).done(function(e){return e.length?($(".wallpapers-container.infinite-loading .wallpapers-container-inner").append(e),moviemania.setWallpaperImages(),moviemania.nextPage++):($(".wallpapers-container.infinite-loading .wallpaper:last").addClass("end"),$(".wallpapers-loader").hide())}).fail(function(e,n,a){if("abort"!==n)return console.log("fail",e,n,a)}).always(function(){return moviemania.currentWallpapersXhr=null,moviemania.loadMoreWallpapersIfNeeded()})):void 0)},moviemania.showCustomDownloadButtonIfNeeded=function(){var e,n,a,t,o,i;if($('.content-inner[data-page-type="wallpaper"] .download-current-screen').length)return o=$('.content-inner[data-page-type="wallpaper"] .wallpaper-image-section').attr("data-device"),n=screen.width/screen.height<1?"phone":"desktop",i=Math.round(screen.width*window.devicePixelRatio),e=Math.round(screen.height*window.devicePixelRatio),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(640===i&&1136===e?(i=744,e=1392):750===i&&1334===e?(i=852,e=1608):1242===i&&2208===e?(i=1520,e=2662):1125===i&&2436===e?(i=1579,e=2890):828===i&&1792===e?(i=1160,e=2150):1242===i&&2688===e&&(i=1496,e=3238)),o===n?(t=(t=(t=$('.content-inner[data-page-type="wallpaper"] .download-current-screen .download-button .resolution').text()).replace("_WIDTH_",i)).replace("_HEIGHT_",e),$('.content-inner[data-page-type="wallpaper"] .download-current-screen .download-button .resolution').text(t),a=(a=(a=$('.content-inner[data-page-type="wallpaper"] .download-current-screen .download-button').attr("data-href-tmpl")).replace("_WIDTH_",i)).replace("_HEIGHT_",e),$('.content-inner[data-page-type="wallpaper"] .download-current-screen .download-button').attr("href",a),$('.content-inner[data-page-type="wallpaper"] .download-current-screen').removeClass("hidden"),$('.content-inner[data-page-type="wallpaper"] .download-options .download-button').addClass("secondary")):void 0},moviemania.positionSearchSuggestionsContainer=function(){var e;return e=$(".search").offset(),$(".search-suggestions-container").css({width:$(".search").width()+"px",left:e.left+"px",top:e.top-$(window).scrollTop()+$(".search").height()+"px",maxHeight:$(window).height()-(e.top-$(window).scrollTop()+$(".search").height())-12+"px"})},moviemania.currentSearchXhr=null,moviemania.search=function(e){if(moviemania.currentSearchXhr&&(moviemania.currentSearchXhr.abort(),moviemania.currentSearchXhr=null),!(e.length<1))return moviemania.currentSearchXhr=$.ajax({url:$(".search").attr("data-search-endpoint")+"?q="+e,dataType:"html"}).done(function(e){return e.length?($(".search-suggestions").html(e).scrollTop(0),$(".search-suggestions-container").removeClass("hidden")):$(".search-suggestions-container").addClass("hidden")}).fail(function(e,n,a){if("abort"!==n)return console.log("fail",e,n,a)}).always(function(){return moviemania.currentSearchXhr=null});$(".search-suggestions-container").addClass("hidden")},moviemania.logIfNeeded=function(){return $(".logging").each(function(){return $.get($(this).data("url"))})},NProgress.configure({showSpinner:!1}),moviemania.showWelcomeBannerIfNeeded=function(){return!Cookies.get("hide_welcome_banner_1")&&$(".welcome-banner-container:not(.always-show)").length?$(".welcome-banner-container:not(.always-show)").addClass("show"):$(".welcome-banner-container:not(.always-show)").remove()},moviemania.closeWelcomeBanner=function(){return $(".welcome-banner-container").remove(),Cookies.set("hide_welcome_banner_1","1",{expires:365})},moviemania.updateAlternativeDeviceSelectorLink=function(){return"phone"===$(".header .device-selector").attr("data-device")?/^\/phone\//.test(document.location.pathname)?$(".header .device-selector .device-container.desktop").attr("href",document.location.pathname.replace(/^\/phone\//,"/desktop/")):$(".content-inner[data-parent-object-path]").length?$(".header .device-selector .device-container.desktop").attr("href",$(".content-inner").data("parent-object-path").replace(/^\/phone\//,"/desktop/")):$(".header .device-selector .device-container.desktop").attr("href","/desktop"):"desktop"===$(".header .device-selector").attr("data-device")?/^\/desktop\//.test(document.location.pathname)?$(".header .device-selector .device-container.phone").attr("href",document.location.pathname.replace(/^\/desktop\//,"/phone/")):$(".content-inner[data-parent-object-path]").length?$(".header .device-selector .device-container.phone").attr("href",$(".content-inner").data("parent-object-path").replace(/^\/desktop\//,"/phone/")):$(".header .device-selector .device-container.phone").attr("href","/phone"):void 0},moviemania.displayWatchLinksIfNeeded=function(){if($(".watch-links-container:not(.processed)").length)return $.get($(".watch-links-container:not(.processed)").data("content-href"),function(e){if($(".watch-links-container").addClass("processed"),e.length)return $(".watch-links-container").html(e),$(".watch-links-section-title").removeClass("hidden"),$(".watch-links-container").removeClass("hidden")})},$(function(){return"undefined"!=typeof VK&&null!==VK&&VK.init({apiId:6180987,onlyWidgets:!0}),"undefined"!=typeof VK&&null!==VK&&VK.Widgets.Like("vk_like",{type:"button",pageTitle:"Moviemania - Textless high-resolution movie wallpapers",pageUrl:"https://www.moviemania.io",pageImage:"https://www.moviemania.io/images/og-image-phone.png?v=4",height:20}),Modernizr.touchevents||$(".menu").on("mouseenter",function(){return moviemania.menuExtendTimeout=setTimeout(function(){return $(".menu .menu-inner").css("height",$(".menu .menu-inner .menu-content").height()+"px")},400)}).on("mouseleave",function(){return clearTimeout(moviemania.menuExtendTimeout),$(".menu .menu-inner").css("height","32px")}),$.pjax.defaults.timeout=6e3,$(document).pjax("a:not(.no-pjax)","#pjax-container"),$(document).on("pjax:click",function(e,n){return moviemania.currentWallpapersXhr&&(moviemania.currentWallpapersXhr.abort(),moviemania.currentWallpapersXhr=null),moviemania.currentSearchXhr&&(moviemania.currentSearchXhr.abort(),moviemania.currentSearchXhr=null),$(".single-row").each(function(){var e;return e=$(this).scrollLeft(),$(this).attr("data-scroll-left",e)}),$(".header").removeClass("show-search"),$(".search input").val(""),moviemania.search("")}),$(document).on("pjax:start",function(e,n,a){if(!1===a.isLocal)return NProgress.start()}),$(document).on("pjax:success",function(){return document.title=$(".pjax-page-info").data("title"),$(".header .device-selector").attr("data-device",$(".pjax-page-info").data("device")),moviemania.updateAlternativeDeviceSelectorLink()}),$(document).on("pjax:end",function(e,n,a){var t;if(NProgress.done(),n&&moviemania.setWallpaperImages(),$(".single-row").each(function(){var e;return e=parseInt($(this).attr("data-scroll-left")),$(this).scrollLeft(e)}),n&&(moviemania.showWelcomeBannerIfNeeded(),moviemania.showCustomDownloadButtonIfNeeded(),moviemania.logIfNeeded()),moviemania.loadMoreWallpapersIfNeeded(),moviemania.displayWatchLinksIfNeeded(),ga("set","location",window.location.href),ga("send","pageview"),n&&("undefined"!=typeof twttr&&null!==twttr&&"function"==typeof(t=twttr.widgets).load&&t.load(),"undefined"!=typeof FB&&null!==FB&&FB.XFBML.parse(),"undefined"!=typeof PinUtils&&null!==PinUtils&&"function"==typeof PinUtils.build&&PinUtils.build(),$(".welcome-banner-container").length))return"undefined"!=typeof VK&&null!==VK?VK.Widgets.Like("vk_like",{type:"button",pageTitle:"Moviemania - Textless high-resolution movie wallpapers",pageUrl:"https://www.moviemania.io",pageImage:"https://www.moviemania.io/images/og-image-phone.png?v=4",height:20}):void 0}),moviemania.showWelcomeBannerIfNeeded(),moviemania.setWallpaperImages(),moviemania.updateAlternativeDeviceSelectorLink(),moviemania.showCustomDownloadButtonIfNeeded(),moviemania.loadMoreWallpapersIfNeeded(),moviemania.positionSearchSuggestionsContainer(),moviemania.displayWatchLinksIfNeeded(),moviemania.logIfNeeded(),$(document).on("click","a.watch-link",function(){return ga("send","event",{eventCategory:"watch-link-click",eventAction:$(this).data("provider")})}),$(document).on("click","a.download-button",function(){return ga("send","event",{eventCategory:"download-wallpaper",eventAction:$(this).data("device"),eventLabel:$(this).data("resolution")||"custom"})}),$(window).scroll(function(){return moviemania.loadMoreWallpapersIfNeeded()}),$(window).resize(function(){return moviemania.positionSearchSuggestionsContainer(),moviemania.loadMoreWallpapersIfNeeded()}),$(".search input").on("input",function(){return moviemania.search($(this).val())}),$(".search input").on("keydown",function(e){var n,a;return 27===e.keyCode?($(this).val(""),$(this).blur(),moviemania.search("")):38===(a=e.keyCode)||40===a?(n=-1,$(".search-suggestions .item").each(function(e){if($(this).hasClass("selected"))return n=e}),38===e.keyCode?n--:40===e.keyCode&&n++,n>$(".search-suggestions .item").length-1?n=-1:n<-1&&(n=$(".search-suggestions .item").length-1),$(".search-suggestions .item.selected").removeClass("selected"),$(".search-suggestions .item").each(function(e){if(e===n)return $(this).addClass("selected")}),!1):void 0}),$(".search-suggestions").on("mouseover",".item",function(){return $(".search-suggestions .item.selected").removeClass("selected"),$(this).addClass("selected")}).on("mouseout",".item",function(){return $(this).removeClass("selected")}),$(".search form").on("submit",function(){return $(".search-suggestions .item.selected:first a").click(),!1}),$(".header .search-icon").on("click",function(){return $(".header").addClass("show-search"),$(".search input").focus()}),$(".header .cancel-button").on("click",function(){return $(".header").removeClass("show-search"),$(".search input").val(""),moviemania.search("")}),$(document).on("click",".welcome-banner-container .close-button",function(e){return e.preventDefault(),moviemania.closeWelcomeBanner()}),$(document).on("click",".header .device-container",function(e){return $(this).hasClass("phone")&&"phone"===$(this).parent().data("device")?e.preventDefault():$(this).hasClass("desktop")&&"desktop"===$(this).parent().data("device")?e.preventDefault():void 0})});